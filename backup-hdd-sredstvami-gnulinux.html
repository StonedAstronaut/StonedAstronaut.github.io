<!DOCTYPE html>
<html lang="ru"
>
<head>
    <title>Backup hdd средствами GNU/Linux - Astro blog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="https://stonedastronaut.github.io/images/favicon.png" rel="icon">

<link rel="canonical" href="https://stonedastronaut.github.io/backup-hdd-sredstvami-gnulinux.html">

        <meta name="author" content="Petr Kalmykov" />
        <meta name="keywords" content="habr,linux,backup" />
        <meta name="description" content="После теста hdd можно определить, пора ли менять диск или нет. Если время пришло, то тогда необходимо перенести со старого жесткого всю инфу на новый. Из гуглежа, стало ясно, чо использование обычного dd не &#34;кошегно&#34;. Ъ использовать GNU ddrescue. Команда для backup&#39;а выглядит следующим образом: # ddrescue /dev/sdX /pth_to_backup ..." />

        <meta property="og:site_name" content="Astro blog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Backup hdd средствами GNU/Linux"/>
        <meta property="og:url" content="https://stonedastronaut.github.io/backup-hdd-sredstvami-gnulinux.html"/>
        <meta property="og:description" content="После теста hdd можно определить, пора ли менять диск или нет. Если время пришло, то тогда необходимо перенести со старого жесткого всю инфу на новый. Из гуглежа, стало ясно, чо использование обычного dd не &#34;кошегно&#34;. Ъ использовать GNU ddrescue. Команда для backup&#39;а выглядит следующим образом: # ddrescue /dev/sdX /pth_to_backup ..."/>
        <meta property="article:published_time" content="2015-02-09" />
            <meta property="article:section" content="misc" />
            <meta property="article:tag" content="habr" />
            <meta property="article:tag" content="linux" />
            <meta property="article:tag" content="backup" />
            <meta property="article:author" content="Petr Kalmykov" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://stonedastronaut.github.io/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="https://stonedastronaut.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://stonedastronaut.github.io/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stonedastronaut.github.io/theme/css/style.css" type="text/css"/>

        <link href="https://stonedastronaut.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Astro blog ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://stonedastronaut.github.io/" class="navbar-brand">
Astro blog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="https://stonedastronaut.github.io/pages/o-saite.html">
                             О сайте
                          </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://stonedastronaut.github.io/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://stonedastronaut.github.io/backup-hdd-sredstvami-gnulinux.html"
                       rel="bookmark"
                       title="Permalink to Backup hdd средствами GNU/Linux">
                        Backup hdd средствами GNU/Linux
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2015-02-09T19:30:00+06:00"> Mon 09 February 2015</time>
    </span>



<span class="label label-default">Tags</span>
	<a href="https://stonedastronaut.github.io/tag/habr.html">habr</a>
        /
	<a href="https://stonedastronaut.github.io/tag/linux.html">linux</a>
        /
	<a href="https://stonedastronaut.github.io/tag/backup.html">backup</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>После теста hdd можно определить, пора ли менять диск или нет.</p>
<p>Если время пришло, то тогда необходимо перенести со старого жесткого всю инфу на новый.</p>
<p>Из гуглежа, стало ясно, чо использование обычного dd не "кошегно". Ъ использовать <strong>GNU ddrescue</strong>. Команда для backup'а выглядит следующим образом:</p>
<div class="highlight"><pre><span class="c"># ddrescue /dev/sdX /pth_to_backup/disk.img /pth_to_backup/disk.img.log</span>
</pre></div>


<p>Можно делать backup как раздела, так и всего hdd.</p>
<p>Для просмотра содержимого <strong>раздела</strong> используем следующую команду:</p>
<div class="highlight"><pre><span class="c"># mount -o loop /pth_to_backup/drive.img /mnt</span>
</pre></div>


<p>А для <strong>образа физического диска</strong>:</p>
<div class="highlight"><pre><span class="c"># losetup --partscan /dev/loop0 drive.img</span>
<span class="c"># mount /dev/loop0p2 /mnt</span>
</pre></div>


<p>или,</p>
<div class="highlight"><pre><span class="c"># kpartx -a /dev/loop0 drive.img</span>
<span class="c"># mount /dev/mapper/loop0p2 /mnt</span>
</pre></div>


<p>в зависимости от дистра.</p>
<p>Восстановление из образа:</p>
<div class="highlight"><pre><span class="c"># ddrescue --force disk.img /dev/sdxX disk.img.log</span>
</pre></div>


<p>!!!<strong>раздел на который идет восстановление должен быть <em>НЕ</em> меньше файла-образа</strong></p>
<p>стырено <a href="http://habrahabr.ru/post/233961/">изхабра</a></p>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="https://stonedastronaut.github.io/10-zapovedei-bezlichnogo-programmirovaniia.html">10 заповедей безличного программирования</a></li>
        <li><a href="https://stonedastronaut.github.io/diagnostika-hdd-sredstvami-unix.html">Диагностика hdd средствами unix</a></li>
        <li><a href="https://stonedastronaut.github.io/hotkey-dlia-brouzera-v-kde.html">Hotkey для броузера в Kde</a></li>
        <li><a href="https://stonedastronaut.github.io/java-sobesedovanie-kollektsii.html">Java собеседование. Коллекции</a></li>
        <li><a href="https://stonedastronaut.github.io/pochemu-programmisty-rabotaiut-po-nocham.html">Почему программисты работают по ночам</a></li>
        <li><a href="https://stonedastronaut.github.io/dekoratory-v-python.html">Декораторы в Python</a></li>
        <li><a href="https://stonedastronaut.github.io/dzhon-rezig-pishite-kod-kazhdyi-den.html">Джон Резиг - Пишите код каждый день</a></li>
        <li><a href="https://stonedastronaut.github.io/vy-razrabotchik-tak-pochemu-vy-do-sikh-por-na-kogo-to-rabotaete.html">Вы разработчик? Так почему вы до сих пор на кого-то работаете?</a></li>
        <li><a href="https://stonedastronaut.github.io/novye-komandy-v-linux-dlia-starykh-reshenii.html">Новые команды в Linux для старых решений</a></li>
        <li><a href="https://stonedastronaut.github.io/awk-sed-bzip2-grep-wc-na-vsekh-iadrakh.html">awk, sed, bzip2, grep, wc на всех ядрах</a></li>
    </ul>
</section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://github.com/StonedAstronaut"><i class="fa fa-github-square fa-lg"></i> github</a></li>
                <li class="list-group-item"><a href="https://plus.google.com/u/0/113483139834962824849/posts"><i class="fa fa-google-plus-square fa-lg"></i> google-plus</a></li>
              </ul>
            </li>

            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
                <ul class="list-group" id="recentposts">
                    <li class="list-group-item">
                        <a href="https://stonedastronaut.github.io/hotkey-dlia-brouzera-v-kde.html">
                            Hotkey для броузера в Kde
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://stonedastronaut.github.io/dekoratory-v-python.html">
                            Декораторы в Python
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://stonedastronaut.github.io/kak-v-20-let-ia-stal-zarabatyvat-po-2-3k-evro-v-mesiats-na-google-adsense-i-chem-eto-zakonchilos.html">
                            Как в 20 лет я стал зарабатывать по 2-3K евро в месяц на Google Adsense, и чем это закончилось
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://stonedastronaut.github.io/10-zapovedei-bezlichnogo-programmirovaniia.html">
                            10 заповедей безличного программирования
                        </a>
                    </li>
                    <li class="list-group-item">
                        <a href="https://stonedastronaut.github.io/java-sobesedovanie-kollektsii.html">
                            Java собеседование. Коллекции
                        </a>
                    </li>
                </ul>
            </li>


            <li class="list-group-item"><a href="https://stonedastronaut.github.io/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                <ul class="list-group list-inline tagcloud" id="tags">
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/android.html">
                            android
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/backup.html">
                            backup
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://stonedastronaut.github.io/tag/crypt.html">
                            crypt
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/diff.html">
                            diff
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/emacs.html">
                            emacs
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://stonedastronaut.github.io/tag/freelance.html">
                            freelance
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://stonedastronaut.github.io/tag/geekbrains.html">
                            geekbrains
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/geektimes.html">
                            geektimes
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://stonedastronaut.github.io/tag/habr.html">
                            habr
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/inline-skates.html">
                            inline skates
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://stonedastronaut.github.io/tag/interview.html">
                            interview
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/java.html">
                            java
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/links.html">
                            links
                        </a>
                    </li>
                    <li class="list-group-item tag-1">
                        <a href="https://stonedastronaut.github.io/tag/linux.html">
                            linux
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/mysql.html">
                            mysql
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/orm.html">
                            orm
                        </a>
                    </li>
                    <li class="list-group-item tag-3">
                        <a href="https://stonedastronaut.github.io/tag/programming.html">
                            programming
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/python.html">
                            python
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/relax.html">
                            relax
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/sport.html">
                            sport
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/sqlalchemy.html">
                            sqlalchemy
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/systemd.html">
                            systemd
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/tproger.html">
                            tproger
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/vk.html">
                            vk
                        </a>
                    </li>
                    <li class="list-group-item tag-4">
                        <a href="https://stonedastronaut.github.io/tag/wget.html">
                            wget
                        </a>
                    </li>
                </ul>
            </li>
    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://getpelican.com/" target="_blank">
                Pelican
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://python.org/" target="_blank">
                Python.org
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://jinja.pocoo.org/" target="_blank">
                Jinja2
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2015 Petr Kalmykov
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://stonedastronaut.github.io/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://stonedastronaut.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://stonedastronaut.github.io/theme/js/respond.min.js"></script>

    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-43336913-2']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->

</body>
</html>