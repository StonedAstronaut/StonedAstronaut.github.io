<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Petr Kalmykov" />
        <meta name="copyright" content="Petr Kalmykov" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="habr, linux, backup, misc, " />

<meta property="og:title" content="Backup hdd средствами GNU/Linux "/>
<meta property="og:url" content="https://stonedastronaut.github.io/backup-hdd-sredstvami-gnulinux.html" />
<meta property="og:description" content="После теста hdd можно определить, пора ли менять диск или нет. Если время пришло, то тогда необходимо перенести со старого жесткого всю инфу на новый. Из гуглежа, стало ясно, чо использование обычного dd не &#34;кошегно&#34;. Ъ использовать GNU ddrescue. Команда для backup&#39;а выглядит следующим образом: # ddrescue /dev/sdX /pth_to_backup ..." />
<meta property="og:site_name" content="Astro blog" />
<meta property="og:article:author" content="Petr Kalmykov" />
<meta property="og:article:published_time" content="2015-02-09T19:30:00+06:00" />
<meta name="twitter:title" content="Backup hdd средствами GNU/Linux ">
<meta name="twitter:description" content="После теста hdd можно определить, пора ли менять диск или нет. Если время пришло, то тогда необходимо перенести со старого жесткого всю инфу на новый. Из гуглежа, стало ясно, чо использование обычного dd не &#34;кошегно&#34;. Ъ использовать GNU ddrescue. Команда для backup&#39;а выглядит следующим образом: # ddrescue /dev/sdX /pth_to_backup ...">

        <title>Backup hdd средствами GNU/Linux  · Astro blog
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://stonedastronaut.github.io/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://stonedastronaut.github.io/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://stonedastronaut.github.io/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://stonedastronaut.github.io/theme/css/custom.css" media="screen">
        <link href="https://stonedastronaut.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Astro blog - Full Atom Feed" />
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="https://stonedastronaut.github.io/"><span class=site-name>Astro blog</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="https://stonedastronaut.github.io">Home</a></li>
                            <li ><a href="https://stonedastronaut.github.io/pages/about.html">About</a></li>
                            <li ><a href="https://stonedastronaut.github.io/categories.html">Categories</a></li>
                            <li ><a href="https://stonedastronaut.github.io/tags.html">Tags</a></li>
                            <li ><a href="https://stonedastronaut.github.io/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="https://stonedastronaut.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="https://stonedastronaut.github.io/backup-hdd-sredstvami-gnulinux.html"> Backup hdd средствами GNU/Linux  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <p>После теста hdd можно определить, пора ли менять диск или нет.</p>
<p>Если время пришло, то тогда необходимо перенести со старого жесткого всю инфу на новый.</p>
<p>Из гуглежа, стало ясно, чо использование обычного dd не "кошегно". Ъ использовать <strong>GNU ddrescue</strong>. Команда для backup'а выглядит следующим образом:</p>
<div class="highlight"><pre><span class="c"># ddrescue /dev/sdX /pth_to_backup/disk.img /pth_to_backup/disk.img.log</span>
</pre></div>


<p>Можно делать backup как раздела, так и всего hdd.</p>
<p>Для просмотра содержимого <strong>раздела</strong> используем следующую команду:</p>
<div class="highlight"><pre><span class="c"># mount -o loop /pth_to_backup/drive.img /mnt</span>
</pre></div>


<p>А для <strong>образа физического диска</strong>:</p>
<div class="highlight"><pre><span class="c"># losetup --partscan /dev/loop0 drive.img</span>
<span class="c"># mount /dev/loop0p2 /mnt</span>
</pre></div>


<p>или,</p>
<div class="highlight"><pre><span class="c"># kpartx -a /dev/loop0 drive.img</span>
<span class="c"># mount /dev/mapper/loop0p2 /mnt</span>
</pre></div>


<p>в зависимости от дистра.</p>
<p>Восстановление из образа:</p>
<div class="highlight"><pre><span class="c"># ddrescue --force disk.img /dev/sdxX disk.img.log</span>
</pre></div>


<p>!!!<strong>раздел на который идет восстановление должен быть <em>НЕ</em> меньше файла-образа</strong></p>
<p>стырено <a href="http://habrahabr.ru/post/233961/">изхабра</a></p>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2015-02-09T19:30:00+06:00">Feb 9, 2015</time>
            <h4>Category</h4>
            <a class="category-link" href="https://stonedastronaut.github.io/categories.html#misc-ref">misc</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://stonedastronaut.github.io/tags.html#backup-ref">backup
                    <span>1</span>
</a></li>
                <li><a href="https://stonedastronaut.github.io/tags.html#habr-ref">habr
                    <span>5</span>
</a></li>
                <li><a href="https://stonedastronaut.github.io/tags.html#linux-ref">linux
                    <span>2</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="https://github.com/StonedAstronaut" title="My github Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-github sidebar-social-links"></i></a>
    <a href="https://plus.google.com/u/0/113483139834962824849/posts" title="My google-plus Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-google-plus sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>